前端工程数据可视化系统的设计与研究

摘 要

随着计算机技术的快速发展，我们的生活变得越来越便利，同时，我们所生活的这个世界每时每刻都在出现大量的信息，这种信息增长的速度是惊人的——我们称之为“信息大爆炸”。信息大爆炸的今天，尤其是在互联网行业中，一个新的话题正成为当下人们热议的焦点，这就是“大数据”。从电商到教育，再到其他各个领域，大数据充斥着现代社会的每个角落。而我们最关心的还是大数据最终将以什么样的形式，怎么样影响甚至改变我们的生活。

数据可视化领域的起源，可以追溯到二十世纪50年代计算机图形学的早期。当时，人们利用计算机创建出了首批图形图表。二十世纪90年代初期，人们发起了一个新的，称为“信息可视化”的研究领域，旨在为许多应用领域之中对于抽象的异质性数据集的分析工作提供支持。因此，21世纪人们正在逐渐接受这个同时涵盖科学可视化与信息可视化领域的新生术语“数据可视化” 。一直以来，数据可视化就是一个处于不断演变之中的概念，其边界在不断地扩大；因而，最好是对其加以宽泛的定义。数据可视化指的是技术上较为高级的技术方法，而这些技术方法允许利用图形、图像处理、计算机视觉以及用户界面，通过表达、建模以及对立体、表面、属性以及动画的显示，对数据加以可视化解释。

本文通过对数据类型的分析研究，实现一个基于现代互联网技术的数据可视化构建工具，为常见的可视化项目提供通用的解决方案。

关键词：数据可视化，大数据，信息可视化，视觉传播

Front End Engineering Design and Research Data Visualization System

Abstract

With the rapid development of computer technology, our lives become more convenient, at the same time, we live in a world all the time in the event of a large amount of information, which is the growth rate is amazing - we call as the "information explosion." Information explosion today, especially in the Internet industry, a new topic is becoming the focus of the moment people hot, this is the "big data." From electricity supplier to education, to other areas, the large data filled every corner of modern society. And we are most concerned about big data will eventually what form, how to influence and even change our lives.

Data visualization field of origin, can be traced back to the early 1950s, computer graphics. At that time, people use the computer to create the first graphic charts. The early 1990s, it launched a new product called "information visualization" of research, aimed at among the many applications for the analysis of abstract heterogeneous data sets to support. Therefore, the 21st century, people are gradually accepting this also covers scientific visualization and information visualization freshman term "data visualization." All along, data visualization is a constantly evolving in the concept, and its borders are constantly expanding; therefore, it is best to be a broad definition. Data Visualization refers to the technically more advanced technical methods, and these methods allow the use of technical graphics, image processing, computer vision, and a user interface, through the expression, as well as three-dimensional modeling, surface properties, and animation display, the data to be visual interpretation.

Through analysis of data types, based on modern Internet technology to achieve a data visualization tools for building a common visualization project to provide a common solution.

Key words: Data visualization, Big data, Information visualization, Visual communication


# 1 绪论

## 1.1 课题背景

截止到2012年，人类生产的所有印刷材料的数据量是200PB，全人类历史上说过的所有话的数据量大约是5EB。IBM的研究称，整个人类文明所获得的全部数据中，有90%是过去两年内产生的。而到了2020年，全世界所产生的数据规模将达到今天的44倍。每一天，全世界会上传超过5亿张图片，每分钟就有20小时时长的视频被分享。然而，即使是人们每天创造的全部信息——包括语音通话、电子邮件和信息在内的各种通信，以及上传的全部图片、视频与音乐，其信息量也无法匹及每一天所创造出的关于人们自身的数字信息量。

随着云时代的来临，大数据（Big data）也吸引了越来越多的关注。大数据通常用来形容一个公司创造的大量非结构化和半结构化数据，这些数据在下载到关系型数据库用于分析时会花费过多时间和金钱。大数据分析常和云计算联系到一起，因为实时的大型数据集分析需要像MapReduce一样的框架来向数十、数百或甚至数千的电脑分配工作。

事实上，大数据的影响并不仅仅限于信息通信产业，而是正在“吞噬”和重构很多传统行业，广泛运用数据分析手段管理和优化运营的公司其实质都是一个数据公司。麦当劳、肯德基以及苹果公司等旗舰专卖店的位置都是建立在数据分析基础之上的精准选址。而在零售业中，数据分析的技术与手段更是得到广泛的应用，传统企业如沃尔玛通过数据挖掘重塑并优化供应链，新崛起的电商如淘宝、亚马逊、京东等则通过对海量数据的掌握和分析，为用户提供更加专业化和个性化的服务。

## 1.2 课题研究现状

数据可视化的概念从八十年代末提出到现在已有十多年的发展，这一领域的理论和系统方面都有了很大的进步，许多免费专用的可视化系统可以在互联网上找到，这包括Vis5d和RIP等专用气象可视化系统；更重要的是许多大型商用公司开发的可视化系统已趋向成熟完善，其中有AVS，DataExpiorer，IrisExpiorer，Khoros等通用可视化系统。不管是专用的可视化系统，还是通用的系统，一般都在前端提供自己的数据格式，这些数据格式的说明往往复杂冗长，实际应用的输出数据往往是可视化系统不能识别的格式，需要很多工作来转化成为可视化系统能够识别的格式；即使经过格式转化，Meta数据信息对于可视化程序员和用户来说仍然是一个黑箱，许多可视化程序员为了进行可视化编程，要熟悉输出数据系统的许多与可视化工作无关的信息，花费大量时间熟悉数据格式；许多数据的转化程序往往提供了一些专门用于读取和打印Meta数据的辅助程序，帮助程序员了解数据集中的Meta数据信息，这对于可视化程序员有一定的帮助，但是这些辅助程序的功能往往是十分有限的。文件方法管理数据带来的不便使人们想到了数据库系统。数据库系统提供了强大的信息管理功能，为科学计算数据的有效使用提供了方便。但是，由于科学计算数据的输出往往十分巨大，动辄以MB、TB计算，直接存储在数据库中是不现实的，这会导致性能上的急剧下降。近来高性能计算领域开始提出并行I/0结合数据库系统进行高效方便的数据管理的方法，其提供了数据库与高性能计算结合的数据管理系统。但是即使在一个应用领域，不同的数据集也存在其自身的特点，必须结合具体应用建立相应的管理系统；同时该系统也应当具有广泛性，能够处理同一应用领域不同系统的输出数据。为此，该文设计了可视化系统前端数据管理系统，将通用的文件I/0和数据库管理系统结合，对可视化系统前端数据的管理方法进行了探索。

## 1.3 课题研究的目的和意义

在现今的社会，大数据的应用越来越彰显它的优势，各种利用大数据进行发展的领域正在协助企业不断地发展新业务，创新运营模式。有了大数据这个概念，对于消费者行为的判断，产品销售量的预测，精确的营销范围以及存货的补给已经得到全面的改善与优化。

大数据是如此重要，以至于其获取、储存、搜索、共享、分析，乃至可视化地呈现，都成为了当前重要的研究课题。

通过本数据可视化系统的研究与设计，主要有以下意义：利用大数据的优势，帮助企业提炼、整合、优化业务数据，将繁杂、难懂的报表数据转化为更加直观、便捷的图形方式展现，帮助企业快速实现信息化，成就现代化企业；通过接口化设计实现与企业现有系统无缝对接，降低企业研发成本。

通过数据，也可以知道现在社会上面主流的东西是什么，只有抓住主流的社会，才能跟上时代的步伐，顺应历史的潮流，抓住机遇，发展自己的公司和事业。大数据就是一个公司的软实力，就好像是一个无形的资产，蕴含着很多商机和信息。

## 1.4 论文构成及研究内容

### 1.4.1 论文构成

本论文各章节内容安排如下：

第一章为绪论部分，介绍了数据可视化的起源、背景，该课题研究目的和意义。对数据可视化相关技术的发展做了简要阐述与总结。本文的研究方向与思路都是在此基础上提出。

第二章为数据可视化系统的研究部分。介绍开发本系统可行性研究，及对系统所采用的相关技术的基本介绍。

第三章为数据可视化系统的设计。在这里详细对系统的功能和数据库设计进行了说明。

第四章为数据可视化系统的实现。在这里对系统的主要模块进行了详细的功能说明，并进行了图形化显示。

第五章为数据可视化系统应用实例部分。。

第六章为总结与展望，对本论文的成果与不足做出详细的分析，以及今后系统的改进方向。


### 1.4.2 研究内容

该数据可视化系统是一套基于WEB的前端工程系统，是用Node做开发环境，webpack做模块打包工具，使用Echarts 3.0做界面图表的展示。本系统采用面对对象的程序设计思路和RESTful 的原则进行API的设计。针对当前多数企业对数据可视化需求进行整理，对系统的功能和流程设计等内容进行研究。实现一个基于现代互联网技术的数据可视化构建工具。用户可以利用本系统实现图表的添加、删除、修改等操作，可以设置图表的类型（折线图、曲线图、柱状图、饼状图等），同时系统支持换肤和自定义布局功能，满足企业对数据可视化系统的个性化需求。

# 2 数据可视化系统的研究

## 2.1 可行性研究

软件系统的可行性研究是在系统调查的基础上，针对新系统的开发是否具备必要性和可能性，从技术、经济等方面进行分析和研究，从而降低研发成本和不可控性。数据可视化系统可行性研究一般可从以下三个方面进行：

1、技术可行性：该系统由用户界面模块、数据图表渲染模块以及事件交互模块等功能之间进行交互操作，所以系统采用MVC架构来实现。作为一个免费、开源的图表库，ECharts提供直观，生动，可交互，可高度个性化定制的数据可视化图表，具有良好的跨平台性，所以ECharts所提供的特性可以充分满足数据可视化系统的功能需要。

2、经济可行性：就大数据时代背景而言，各行各业的企业或政府机构对数据可视化的需求愈加强烈，然而相对于数据处理能力，数据可视化界面并非企业核心竞争力，将这一部分工作交予第三方来完成是可行的。企业完全可以接受一套适用于自己业务系统的展示界面系统，这样可以降低公司的研发成本、快速满足业务需要、提高服务质量和住户满意度，公司获益远高于系统开发成本。

3、操作可行性：本系统界面友好、图表功能丰富多样，界面可支持换肤，无论视觉上、布局上还是功能上都能达到个性化定制，几乎可以满足企业常规的需求。易于操作，用户可以很快熟悉和习惯。


## 2.2 数据可视化相关技术

### 2.2.1 SVG 和 Canvas

SVG，可缩放矢量图形（英语：Scalable Vector Graphics，SVG）是一种基于可扩展标记语言（XML），用于描述二维矢量图形的图形格式。SVG可以实现动态和交互功能。在DOM模型的基础上，SVG开发设计人员可以利用ECMAScript或者SMIL来进行时序控制或对象的操纵。SVG允许3种图形对象类型：矢量图形、栅格图像以及文本。图形对象——包括PNG、JPEG这些栅格图像——能够被编组、设计、转换及集成进先前的渲染对象中。文本可以在任何适用于应用程序的XML命名空间之内，从而提高SVG图形的搜索能力和无障碍性。SVG提供的功能集涵盖了嵌套转换、裁剪路径、Alpha通道、滤镜效果、模板对象以及可扩展性。

Canvas元素是HTML5的一部分，允许脚本语言动态渲染位图像。Canvas由一个可绘制地区HTML代码中的属性定义决定高度和宽度。JavaScript代码可以访问该区域，通过一套完整的二维绘图API，从而使动态生成的图形。

### 2.2.2 Highcharts

Highcharts 是一个用纯 JavaScript 编写的一个图表库， 能够很简单便捷的在 Web 网站或是 Web 应用程序添加有交互性的图表，并且免费提供给个人学习、个人网站和非商业用途使用。

Highcharts 支持的图表类型有直线图、曲线图、区域图、柱状图、饼状图、散状点图、仪表图、气泡图、瀑布流图等多达 20 种图表，其中很多图表可以集成在同一个图形中形成混合图。

**HighCharts的主要特性包括：**

- 兼容性：HighCharts采用纯JavaScript编写，兼容当今大部分的浏览器，包括Safari、IE和火狐等等；HighCharts的几种基本的官方图表示例(6张)
- 图表类型：HighCharts支持图表类型，包括曲线图、区域图、柱状图、饼状图、散状点图和综合图表等等，可以满足各种需求。
- 不受语言约束：HighCharts可以在大多数的WEB开发中使用，并且对个人用户免费，支持ASP，PHP，JAVA，.NET等多种语言中使用。
- 提示功能：HighCharts生成的图表中，可以设置在数据点上显示提示效果，即将鼠标移动到某个数据点上，可以显示该点的详细数据，并且可以对显示效果进行设置。
- 放大功能：HighCharts可以大量数据集中显示，并且可以放大某一部分的图形，将图表的精度增大，进行详细的显示，可以选择横向或者纵向放大。
- 时间轴：可以精确到毫秒。
- 导出：表格可导出为 PDF/ PNG/ JPG / SVG 格式
- 输出：网页输出图表。
- 可变焦：选中图表部分放大，近距离观察图表；
- 外部数据：从服务器载入动态数据。
- 文字旋转：支持在任意方向的标签旋转。

HighCharts对个人及非商业用途的用户是免费的。

### 2.2.3 ECharts

ECharts，一个纯 Javascript 的图表库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），底层依赖轻量级的 Canvas 类库 ZRender，提供直观，生动，可交互，可高度个性化定制的数据可视化图表。

ECharts 3 中更是加入了更多丰富的交互功能以及更多的可视化效果，并且对移动端做了深度的优化。

**丰富的图表类型**

ECharts 提供了常规的折线图，柱状图，散点图，饼图，K线图，用于统计的盒形图，用于地理数据可视化的地图，热力图，线图，用于关系数据可视化的关系图，treemap，多维数据可视化的平行坐标，还有用于 BI 的漏斗图，仪表盘，并且支持图与图之间的混搭。

你可以在下载界面下载包含所有图表的构建文件，如果只是需要其中一两个图表，又嫌包含所有图表的构建文件太大，也可以在在线构建中选择需要的图表类型后自定义构建。

**多个坐标系的支持**

ECharts 3 开始独立出了“坐标系”的概念，支持了直角坐标系（catesian，同 grid）、极坐标系（polar）、地理坐标系（geo）。图表可以跨坐标系存在，例如折、柱、散点等图可以放在直角坐标系上，也可以放在极坐标系上，甚至可以放在地理坐标系中。

**移动端的优化**

流量珍贵的移动端需要图表库的体积尽量小。ECharts 和 ZRender 代码的重构，带来了核心部分体积的减小。ECharts 组件众多，并且后面会持续增加，我们提供了更细粒度的按需打包能力。最小体积缩小为 ECharts 2 的 40%。

**深度的交互式数据探索**

交互是从数据中发掘信息的重要手段。“总览为先，缩放过滤按需查看细节”是数据可视化交互的基本需求。

ECharts 提供了 legend visualMap dataZoom tooltip等组件以及图表附带的漫游，选取等操作提供了数据筛取、视图缩放、展示细节等能力。

ECharts 3 中，对这些组件进行了广泛增强，例如支持在数据的各种坐标轴、维度进行数据过滤、缩放，以及在更多的图中采用这些组件。

**大数据量的展现**

借助 Canvas 的能力，ECharts 在散点图中能够轻松展现上万甚至上十万的数据。

**多维数据的支持以及丰富的视觉编码手段**

ECharts 3 开始加强了对多维数据的支持。除了加入了平行坐标等常见的多维数据可视化工具外，对于传统的散点图等，传入的数据也可以是多个维度的。配合视觉映射组件 visualMap 提供的丰富的视觉编码，能够将不同维度的数据映射到颜色，大小，透明度，明暗度等不同的视觉通道。

**动态数据**

ECharts 由数据驱动，数据的改变驱动图表展现的改变。因此动态数据的实现也变得异常简单，只需要获取数据，填入数据，ECharts 会找到两组数据之间的差异然后通过合适的动画去表现数据的变化。配合 timeline 组件能够在更高的时间维度上去表现数据的信息。

**绚丽的特效**

ECharts 针对线数据，点数据等地理数据的可视化提供了吸引眼球的特效。

### 2.2.4 D3.js

D3.js 是基于数据驱动文档工作方式的一款JavaScript函数库，主要用于网页作图、生成互动图形，是最流行的可视化库之一，它被很多其他的表格插件所使用。D3使你有能力借助HTML，SVG和CSS来生动地可视化各种数据。D3不需要你使用某个特定的框架，它的重点在于对现代主流浏览器的兼容，同时结合了强大的可视化组件，以数据驱动的方式去操作DOM。


# 3 数据可视化系统的设计

## 3.1 数据可视化系统需求分析

数据可视化已经成为一种业务需求数据可视化在企业当中的重要地位正不断提升，这是因为企业用户如今几乎被流数据、社交媒体数据、机器数据以及其它大规模结构化、半结构化乃至非结构化数据所淹没。可视化能够有效帮助分析师们从纷繁复杂的信息当中提取有价值结论，这一点是传统数据列表、电子表格以及图表所无法实现的。为了帮助企业用户与数据科学家弥合二者之间的显著差异，供应商们开始在产品中添加丰富的可视化功能。可视化功能可以根据不同用户群体加以定制，从而帮助对方更为便捷地对内容进行理解。某些供应商甚至推出了一系列更为复杂的可视化产品。仅仅借助统计或者数据分析部门的支持已经不足以科学有效地完成分析工作并发挥其潜力。企业希望能将分析机制作为决策制定流程的组成部分，并将其推广到各个职能部门当中，包括市场推广、销售、运营、财务以及人力资源等等。为了在上述职能区划中改进客户激励与结果优化机制，企业希望能将更多不同类型的数据纳入到分析范畴中来。

鉴于系统的通用性，需要支持换肤功能，满足不同企业对界面风格的要求；系统分为两列布局，左侧为导航栏，支持添加、删除页面，每个导航对应一个页面；右侧界面部分为图表展示区，支持添加、删除图表，支持图表的自定义布局。图表类别支持常规的折线图，柱状图，散点图，饼图，K线图等。

## 3.2 数据可视化系统程序设计

数据可视化系统的设计是以计算机技术为支持，通过对数据可视化系统的分析和算法模块的调用，实现将处理后的结果以可视化形式输出。在设计过程中，考虑系统以下几个方面：

- 可处理的数据类型一般来说，各种数据分析工具所能处理的数据类型各不相同，但它们都可以处理格式化的记录数据或关系数据库数据。然而对于某些特殊的应用和数据，例如文本数据、多媒体数据、Web日志等，并不是所有数据挖掘系统都能处理。好的数据挖掘工具应该可以访问多种类型的数据，本系统支持导入多种数据库数据如Access、SQL Server、Oracle等和文本文件数据如CSV、Excle等。
- 运行平台和兼容性这个数据挖掘工具能在Unix操作系统上运行吗？这一类问题也是选择数据挖掘工具时不得不考虑的问题。有些数据挖掘工具能在多种操作系统上运行，有些只能在一种操作系统上运行。选择能够运行在现有平台上的系统，将可以保护用户的前期投资。
- 数据预处理能力数据预处理是数据挖掘过程中非常重要的一步，同时也是任务非常繁重的一步。是否提供良好的数据预处理工具，也是衡量数据挖掘工具的一个重要指标。例如，数据的选择和转换。数据选择和转换模式通常被大量的数据项隐藏。有些数据是冗余的，有些数据是完全无关的。而这些数据项的存在会影响到有价值的模式的发现。数据挖掘系统的一个很重要功能就是能够处理数据复杂性，提供工具、选择正确的数据项和转换数据值。
- 可伸缩性可伸缩性是系统的基本特色，它指的是系统应该提供一种机制，使宿主应用程序可以同时管理多个用户开发的应用程序，可以实时动态地加载和释放应用模块，实现软件规模的动态伸缩。如果一个数据挖掘算法在数据量增加了十倍的情况下，所需运行时间也不超过原来所需时间的十倍，那么就可说这个算法是可伸缩的。同样，一个数据挖掘系统是否具有可伸缩性，也标志了该系统的性能。
- 可视化性能可视化界面提供直观、简洁的机制表示大量的信息。这既方便了用户，更有助于定位重要的数据，评价模式的质量，从而改进系统的实用性。
- 操作性能操作性能包括图形显示界面和数据分析交互两个方面。图形界面好的工具可以方便用户，引导用户执行任务，为用户节省时间。而数据分析交互则是数据挖掘产品标准化和不同数据挖掘产品之间交互的基础。
- 系统相对独立性相对独立性是指用户开发的程序相对独立，它的加载和卸载不会影响宿主应用程序和其他扩展应用程序的正常运行。

本数据可视化系统工作流程主要为用户展示所有的数据图表，用户通过浏览器访问该系统时后段查询数据库获取所有相关的图表数据等。这些数据通过在服务器端生成json格式的代码后返回给系统，通过图表渲染出来供用户查看。

### 3.2.1 系统模块划分

模块划分的重要性

所谓软件的模块划分是指在软件设计过程中，为了能够对系统开发流程进行管理，保证系统的稳定性以及后期的可维护性，从而对软件开发按照一定的准则进行模块的划分。根据模块来进行系统开发，可提高系统的开发进度，明确系统的需求，保证系统的稳定性。

在系统设计的过程中，由于每个系统实现的功能不同，所以每个系统的需求也将会不同。也就导致了系统的设计方案不同。在系统的开发过程中，有些需求在属性上往往会有一定的关联性，而有些需求之间的联系很少。如果在设计的时候，不对需求进行归类划分的话，在后期的过程中往往会造成混乱。

软件设计过程中通过对软件进行模块划分可以达到一下的好处：

- 使程序实现的逻辑更加清晰，可读性强。
- 使多人合作开发的分工更加明确，容易控制。
- 能充分利用可以重用的代码。
- 抽象出可公用的模块，可维护性强，以避免同一处修改在多个地方出现。
- 系统运行可方便地选择不同的流程。
- 可基于模块化设计优秀的遗留系统，方便的组装开发新的相似系统，甚至一个全新的系统。

模块划分的方法

很多人都参与过一些项目的设计，在很多项目设计过程中对于模块划分大多都是基于功能进行划分。这样划分有一个好处，由于在一个项目的设计过程中，有着诸多的需求。而很多需求都可以进行归类，根据功能需求分类的方法进行模块的划分。可以让需求在归类上得到明确的划分，而且通过功能需求进行软件的模块划分使得功能分解，任务分配等方面都有较好的分解。

按照任务需求进行模块划分是一种基于面向过程的划分方法，利用面向过程的思想进行系统设计的好处是能够清晰的了解系统的开发流程。对于任务的分工、管理，系统功能接口的制定在面向过程的思想中都能够得到良好的体现。

按任务需求进行模块划分的主要步骤如下：
- 分析系统的需求，得出需求列表；
- 对需求进行归类，并划分出优先级；
- 根据需求对系统进行模块分析，抽取出核心模块；
- 将核心模块进行细化扩展，逐层得到各个子模块，完成模块划分。

在很多情况下，在划分任务需求的时候，有些需求和很多个模块均有联系，这个时候，通过需求来确定模块的划分就不能够降低模块之间的耦合了。而且有些模块划分出来里面涉及的数据类型多种多样，显然这个时候根据系统所抽象出来的数据模型来进行模块划分更加有利。

在系统进行模块划分之前，往往都会有一个数据模型的抽象过程，根据系统的特性抽象出能够代表系统的数据模型。根据数据模型来进行模块划分，可以充分降低系统之间的数据耦合度。按照数据模型进行模块的划分，降低每个模块所包含的数据复杂程度，简化数据接口设计。同时，对于数据的封装可以起到良好的作用，提高了系统的封闭性。

抽象数据模型的模块划分方案是一种基于面向对象的思想进行的。这种思想的特点就是不以系统的需求作为模块的划分方法，而是以抽象出系统的数据对象模型的思想对模块进行划分。而利用这种思想进行模块划分的主要好处能够接近人的思维方式对问题进行划分，提高系统的可理解性，可以从较高层次上对系统进行把握！

按照数据模型进行模块划分的主要步骤如下：
- 根据系统框架抽象出系统的核心数据模型；
- 根据核心数据模型将系统功能细化，并将数据模型与视图等剥离，细化数据的流向；
- 依据数据的流向制定模块和接口，完成模块划分。

模块划分的准则

当系统被划分成若干个模块之后，模块之间的关系称之为块间关系，而模块内部的实现逻辑都属于模块内部子系统。对于软件的模块划分要遵循一些基本原则，遵循基本原则进行模块划分所设计出来的系统具有可靠性强，系统稳定，利于维护和升级。

设计模块往往要注意很多的问题，好的模块划分方案可以对系统开发带来很多的便利，提高整个系统的开发效率，而且对于系统后期的维护难度也会降低不少。反之，如果模块划分的不恰当，不仅不能带来便利，往往还会影响程序的开发。

在进行软件模块划分的时候，首先要遵从的一个准则就是确保每个模块的独立性，所谓模块独立性，即：不同模块相互之间的联系尽可能少，尽可能的减少公共的变量和数据结构。每个模块尽可能的在逻辑上独立，功能上完整单一，数据上与其他模块无太多的耦合。

模块独立性保证了每个模块实现功能的单一性，接口的统一性，可以将模块之间的耦合度充分降低。在进行软件模块划分的时候，如果各个模块之间的联系过多，模块独立性差容易引起系统结构混乱，层次划分不清晰。导致有的需求和多个模块均有关联，严重影响系统设计。

对于模块独立性的好处主要可以归纳为以下几点：
- 模块功能完整独立；
- 数据接口简单；
- 程序易于实现；
- 易于理解和系统维护；
- 利于限制错误范围；
- 在软件设计的过程中，往往需要对系统的结构层次进行分析，从中抽取出系统的设计框架，通过框架来指导整个软件设计的流程。而一个良好的系统框架也是决定整个系统的稳定性、封闭性、可维护性的重要条件之一。

因此，在对软件进行模块划分的过程中，要充分遵照当前系统的框架结构。模块的划分要和系统的结构层次相结合，根据系统的层次对各个模块也进行层次划分。如果系统的模块划分和框架结构相违背的话，则会导致类似数据混乱，接口复杂，模块耦合性过高等等的问题出现。

如果模块划分的方法主要是依据任务需求而进行划分的话，那么可以先将任务需求根据系统框架划分出系统等级。通过对任务需求的等级划分对模块划分起到引导作用，同时，依照系统结构层次来对模块划分。

在进行模块划分的时候，有很多情况下不能够清晰的把握每个模块的具体内容。往往会出于对需求归类或者数据统一的角度上对模块进行设计。这种设计理念是对的，但是如果只是单纯的从这几个方面来进行模块设计的话，那么也会导致在模块划分上出现另外一些情况。比如说设计的某一个模块，虽然数据接口统一，但是内部实现的功能非常多，单一模块的规模过大，包含的内容过多。这样设计模块会导致什么问题出现呢？

如果一个模块包含的内容过多，会导致程序实现难度增加，数据处理流程变得复杂，程序维护性降低，出错范围不易确定等情况的出现。同时，由于模块实现的功能丰富，则必然会导致接口也变得繁多，那么与其他模块之间的独立性就得不到保证。而且，一个模块包含太多的内容也会给人一种一团乱糟糟的感觉，严重影响对程序的理解。

在设计模块的时候，需要遵循每个模块功能单一、接口简单、结构精简的原则。对每个模块的设计确保该模块的规模不要太大，接口尽量的单一简化。这样的话，虽然可能会导致模块的数量上比较多，但是能够确保模块的独立性，而且不会影响系统的整体的框架结构。关于模块内部的具体实现和接口设计将在下一部分进行讲解。提高软件开发速度，同时软件质量高。

### 3.2.2 系统功能设计

本系统支持的具体功能如下：

- 1．切换主题：通过模块化样式表文件，抽离出控制颜色的部分，定制几套常用的配色方案，界面上提供主题切换的操作，通过localstorage使浏览器记住用户设置的主题。
- 2．侧边栏：视图列表部分，用户可以进行添加、删除、修改等功能，是图表实例的载体。
- 3．添加图表类型：添加图表，支持常规的折线图，柱状图，散点图，饼图，K线图等。
- 4．自定义图表布局：支持响应式布局，在不同分辨率下可以使图表展示效果最佳；支持图表位置拖放，用户可自主拖动不同图表在界面中显示的位置

# 4 数据可视化系统的实现

## 4.1 系统开发环境及相关技术

### 4.1.1 Homebrew

Homebrew，是Mac OSX上的软件包管理工具，能在Mac中方便的安装软件或者卸载软件。

在安装 Homebrew 之前，需要将 Xcode Command Line Tools 安装完成，这样你就可以使用基于 Xcode Command Line Tools 编译的 Homebrew。安装完成后，Homebrew 会将本地 /usr/local 初始化为 git 的工作树，并将目录所有者变更为当前所操作的用户，将来 brew 的相关操作不需要 sudo 。

### 4.1.2 Node.js

来自官网的解释：Node.js是一个建立在Chrome的V8 JavaScript引擎的JavaScript运行时。 Node.js使用事件驱动，非阻塞I/ O模型，使得它轻量、执行效率高。 Node.js的包管理系统NPM，是世界上最大的开源库生态系统。

### 4.1.3 Webpack

webpack是一款模块加载器兼打包工具，它能把各种资源，例如JS（含JSX）、coffee、样式（含less/sass）、图片等都作为模块来使用和处理。

## 4.2 系统功能实现

### 4.2.1 切换主题的实现

数据可视化是 数据 到 视觉元素 的映射过程（这个过程也可称为视觉编码，视觉元素也可称为视觉通道）。

ECharts 的每种图表本身就内置了这种映射过程，比如折线图把数据映射到『线』，柱状图把数据映射到『长度』。一些更复杂的图表，如 graph、事件河流图、treemap 也都会做出他们内置的映射。

此外，ECharts 还提供了 visualMap 组件 来提供通用的视觉映射。visualMap 组件中可以使用的视觉元素有：
图形类别（symbol）、图形大小（symbolSize）
颜色（color）、透明度（opacity）、颜色透明度（colorAlpha）、
颜色明暗度（colorLightness）、颜色饱和度（colorSaturation）、色调（colorHue）.

基本原理很简单，就是使用JavaScript切换对应的CSS样式表。除了切换CSS样式表文件之外，通常的切换主题还需要通过浏览器的Cookie来记录用户之前设置的界面主题，这样下次用户访问的时候，就可以自动使用上次用户配置的选项。基本工作流程就是：访问系统——JavaScript读取Cookie——如果没有，使用默认CSS——如果有，使用指定CSS；用户点击切换主题选项——JavaScript控制替换对应的CSS样式表——将主题对应的标识写进浏览器的Cookie存储起来。

### 4.2.2 侧边栏的实现

### 4.2.3 添加图表类型的实现

数据可视化是 数据 到 视觉元素 的映射过程（这个过程也可称为视觉编码，视觉元素也可称为视觉通道）。

ECharts 的每种图表本身就内置了这种映射过程，比如折线图把数据映射到『线』，柱状图把数据映射到『长度』。一些更复杂的图表，如 graph、事件河流图、treemap 也都会做出他们内置的映射。

此外，ECharts 还提供了 visualMap 组件 来提供通用的视觉映射。visualMap 组件中可以使用的视觉元素有：
图形类别（symbol）、图形大小（symbolSize）
颜色（color）、透明度（opacity）、颜色透明度（colorAlpha）、
颜色明暗度（colorLightness）、颜色饱和度（colorSaturation）、色调（colorHue）。

ECharts中的数据，一般存放于 series.data 中。根据图表类型不同，数据的具体形式也可能有些许差异。比如可能是『线性表』、『树』、『图』等。但他们都有个共性：都是『数据项（dataItem）』的集合。每个数据项含有『数据值（value）』和其他信息（如果需要的话）。每个数据值，可以是单一的数值（一维）或者一个数组（多维）。

在 ECharts 的图表中用户的操作将会触发相应的事件。开发者可以监听这些事件，然后通过回调函数做相应的处理，比如跳转到一个地址，或者弹出对话框，或者做数据下钻等等。

在 ECharts 中事件分为两种类型，一种是用户鼠标操作点击，或者 hover 图表的图形时触发的事件，还有一种是用户在使用可以交互的组件后触发的行为事件，例如在切换图例开关时触发的 'legendselectchanged' 事件（这里需要注意切换图例开关是不会触发'legendselected'事件的），数据区域缩放时触发的 'datazoom' 事件等等。

ECharts 中实现异步数据的更新非常简单，在图表初始化后不管任何时候只要通过 jQuery 等工具异步获取数据后通过 setOption 填入数据和配置项就行。除了图表外 ECharts 中，提供了很多交互组件。例如：图例组件 legend、标题组件 title、视觉映射组件 visualMap、数据区域缩放组件 dataZoom、时间线组件 timeline。

ECharts 提供了丰富的自定义配置选项，并且能够从全局、系列、数据三个层级去设置数据图形的样式。ECharts 中有一些通用的样式，诸如阴影、透明度、颜色、边框颜色、边框宽度等，这些样式一般都会在系列的 itemStyle 里设置。

### 4.2.4 自定义图表布局的实现

采用浏览器的COOKIE来记录用户拖动模块的位置，采用jQuery UI的Sortable拖动排序插件实现拖动效果。 将拖动后的模块的位置通过javascript写入浏览器的cookie里。也就是说拖动后各模块的排序位置信息是记录在客户端的cookie里的。通过拖动随意布局页面模块。记录拖动后模块的位置，并记录到cookie中。


# 5 数据可视化系统应用实例

## 5.1 全国主要城市空气质量

## 5.2 各国人均寿命与GDP关系演变

## 5.3 男性女性身高体重分布

## 5.4 北京公交路线

## 5.5 2015年上证指数

# 6 总结与展望

至此，前端攻城数据可视化系统研究与设计顺利完成。通过这次比较完整的系统设计与开发，我摆脱了单纯理论知识的学习状态，和实际的结合锻炼了我的综合运用能力。通过对整体的设计，对局部的取舍，以至对细节的斟酌处理，都使我的项目开发能力得到了提高，经验得到了丰富，并且意志品质力、抗压能力以及耐力也都得到了不同程度的提升。虽然毕业设计内容繁多，过程繁琐，但我的收获却更加丰富。各种系统的适用条件，各种语言的选用标准，各种系统的设计方式，我都是随着设计的不断深入而不断熟悉并学会运用的。发现学习一门新技术，最重要的是实践，只有多动手才能尽快掌握它。 

在计算机技术快速发展和国家大力推进互联网＋战略的大背景下，数据可视化势必成为数据展示、数据分析的工作工具，在生活、工作、科研中扮演着重要作用。浏览器的不断发展和普及为基于web前端技术的可视化系统提供了必备的界面渲染能力，同时，web技术的快速发展也让视觉可视化的功能更强大。

本系统通过抽象企业需求提供通用的可视化界面展示方案，可以解决企业常规的可视化需求，但是由于无法预测企业特殊的场景需要，所以现有方案提供的可视化图表依然有限，对于企业特有的图表类型还需要针对性的定制开发，进而实现更加全面的数据可视化解决方案。

# 致谢

本文是在魏平老师精心指导和大力支持下完成的。魏老师以其严谨求实的治学态度、高度的敬业精神、孜孜以求的工作作风，让我无比钦佩。他渊博的知识、开阔的视野和敏锐的思维给了我深深的启迪。从选题到研发到实现，魏老师给予了我正确的指导和极大的帮助，使得我在设计当中少走了很多弯路，在顺利完成毕业设计的同时更让我学到了许多知识，对原有的理论知识能够很好的与实际结合起来运用，也大大的提高了我的动手的能力。这使得我对以后的工作充满了信心。

其次，我还是感谢帮助过我的同学们。感谢你们在我的论文写作过程中对我提出的意见和帮助，感谢你们陪伴我度过了在北航学习的美好时光。我很庆幸自己能够在北航和你们相聚在一起，是你们给我留下了值得珍藏的最美好的记忆。

最后，我还要感谢我的亲人，谢谢你们在学业上对我的关心、支持与鼓励。感谢你们多年以来对我的无私奉献和默默支持。

在此我由衷的向我的指导老师魏平老师以及所有负责此次毕业设计评阅的老师再次的说一声谢谢！我始终相信，没有比人更高的山峰，没有比脚印更长的旅程。虽然即将毕业，但学习是永无止境的。我将继续前行，去攀登知识的高峰，踏遍学问的大道，生命不息，奋斗不止！今后我会以此次的毕业设计为起点迈向更远的未来。


# 参考文献

[1] 臧铁钢等．软件工程[M]．北京：中国铁道出版社，2007：190-201．

[2] 韩万江．软件项目管理案例教程(第二版)．机械工业出版社，2011：110-116．

[3] 陈为，张嵩，鲁爱东．数据可视化的基本原理与方法．科学出版社，2013：66-98．

[4] Jeremy Keith．JavaScript DOM．人民邮电出版社，2011：120-136．

[5] 李晓明．一种基于用户行为的兴趣度模型[J]．计算机工程与应用，3（8）：148-154．

[6] [美]Nicholas C. Zakas著 李松峰，曹力译．《JavaScript高级程序设计》（第3版）人民邮电出版社．

[7] 黄志澄 给数据以形象 给信息以智能 数据可视化技术及其应用展望- 《电子展望与决策》 - 1999

[8] 谢民主，王加阳，蒋外文 数据仓库的多维数据模型的研究- 《计算机工程与应用》 - 2004

[9] 涂建光，罗昌隆 多维数据立方体模型及其基于关系的实现- 《计算机工程与应用》 - 2001

[10] 张文鹤 数据挖掘过程中多维数据可视化技术研究与应用- 沈阳工业大学 - 2007

[11] 李红旮，崔伟宏 地理信息系统中时空多维数据可视化技术研究- 《遥感学报》 - 1999

[12] 陈谊，谭桂龙 多维数据的信息可视化方法及应用研究- 《系统仿真学报》 - 2008

[13] 陈谊，谭桂龙 多维数据的信息可视化方法及应用研究- 全国虚拟现实与可视化学术会议 - 2008

[14] 任东怀，胡俊 多维数据可视化技术综述- 《工程地质计算机应用》 - 2006

[15] 张友加 地震数据可视化技术研究及应用- 《湖南大学》 - 2009

[16] 李文，叶少珍 多维数据可视化技术及分类器的研究进展- 《福建电脑》 - 2010



 


