# JavaScript: The Good Parts

## 语法


### 注释

JavaScript提供两种注释形式，一种是```/* */```包围的块注释，另一种是以```//```为开头的行注释。建议使用```//```注释。


### 标识符

标识符被用于语句、变量、参数、属性名、运算符和标记。

标识符由一个字母、下划线（```_```）或美元符号（```$```）开头，其后可选择性地加上一个或多个字母、数字、下划线或美元符号。

JavaScript不允许使用保留字来命名标识符。


### 数字

如果一个数字字面量有指数部分，那么这个字面量的值等于e之前的数字与10的e之后数字的次方相乘。

负数可以用前置运算符```-```加数字构成。

#### 数字有一些方法：

##### number.toExponential()

把number转换成一个指数形式的字符串。

##### number.toFixed()

把number转换成一个十进制数形式的字符串。

##### number.toPrecision()

把number转换成一个十进制数形式的字符串。

##### number.toString()

把number转换成一个字符串。


JavaScript有一个对象```Math```，它包含一套作用于数字的方法。


### 字符串

字符串字面量可以包在一对单引号或双引号中，它可能包含0个或多个字符。

反斜线符号（```\```）是转义字符，用来把那些正常情况下不能允许的字符插入到字符串中。

字符串有一个```length```属性。

字符串是不可变的。一单字符串被创建，就永远无法改变它。但可以通过```+```运算符连接其他字符串来创建一个新字符串。两个包含着完全相同的字符且字符顺序也相同的字符串被认为是相同的字符串。

#### 字符串有一些方法：

##### string.charAt(pos)

##### string.charCodeAt(pos)

##### string.concat(string...)

##### string.indexOf(searchString, position)

##### string.lastIndexOf(searchString, position)

##### string.localeCompare(that)


### 语句

语句通常按照从上到下的顺序被执行。JavaScript可以通过条件语句（if和switch）、循环语句（while、for和do）、强制跳转语句（break、return和throw）和函数调用来改变执行序列。

代码块是包在一对花括号中的一组语句。

当```var```语句被用在函数内部时，它定义的是这个函数的私有变量。

#### if 语句

根据表达式的值改变程序流程。表达式的值为真时之行跟在其后的代码块，否则，执行可选的else分支。

```javascript
if (true) {
  
} else {
  
}
```

下面列出的值被当做假（false）：

* false
* null
* undefined
* NaN
* 数字 0
* 空字符串 ''

其他所有的值都被当做真，包括true、字符串'false'，以及所有的对象。

#### switch 语句

switch 语句执行一个多路分支。它把其表达式的值和所有指定的case条件进行匹配。其表达式可能产生一个数字或字符串。当找到一个精确的匹配时，执行匹配的case从句中的语句。如果没有找到任何匹配，则执行可选的default语句。

一个case从句包含一个或多个case表达式。case表达式不一定必须是常量。要防止继续执行下一个case，case从句后应该跟随一个强制跳转语句。可以用break语句退出switch语句。

```javascript
switch (expression) {
  case expression:
    
    break;
  default:
    
}
```

#### while 语句

while语句执行一个简单的循环。如果表达式的值为假，就终止循环。而当表达式的值为真时，代码块被执行。

```javascript
while (true) {
  
}
```

#### do 语句

do语句就像while语句，唯一的区别是它在代码块执行之后检测表达式的值。这就意味着代码块至少要执行一次。

```javascript
do {
  
} while (true);
```

#### for 语句

```javascript
for (var i = 0; i < array.length; i++) {
  array[i]
}
```

枚举对象的所有属性名：

```javascript
for (var variable in object) {
  if (object.hasOwnProperty(variable)) {
    
  }
}
```

```javascript
for (variable of iterable) {
  
}
```

try语句执行一个代码块，并捕获该代码块抛出的任何异常。catch从句定义一个新的变量来接收抛出的异常对象。

```javascript
try {
  
} catch (e) {
  
} finally {
  
}
```

#### return 语句

return语句会导致从函数中提前返回。它也可以指定要被返回的值。如果没有指定返回表达式，那么返回值是undefined。

JavaScript不允许在return关键字和表达式之间换行。

#### break 语句

break语句会使程序退出一个循环语句或switch语句。它也可以指定一个可选的标签，那退出的就是带该标签的语句。

JavaScript不允许在break关键字和标签之间换行。


### 表达式

三元运算符```?```有3个运算数。如果第1个运算数值为真，产生第2个运算数的值，否则产生第3个运算数的值。

运算符的优先级：

| 运算符 | 说明 |
| -- | -- |
| ```.```、```[]```、```()``` | 提取属性与调用函数 |
| ```delete```、```new```、```typeof```、```+```、```-```、```!``` | 一元运算符 |
| ```*```、```/```、```%``` | 乘法、除法、求余 |
| ```+```、```-``` | 加法／连接、减法 |
| ```>=```、```<=```、```>```、```<``` | 不等式运算符 |
| ```===```、```!==```、```==```、```!=``` | 等式运算符 |
| ```&&``` | 逻辑与、逻辑或 |
| ``` ? : ``` | 三元 |

如果第1个运算数的值为假，那么运算符```&&```产生它的第1个运算数的值，否则产生第2个运算数的值。

如果第1个运算数的值为真，那么运算符```||```产生它的第1个运算数的值，否则产生第2个运算数的值。

函数调用引发函数的执行。函数调用运算符是跟随在函数名后面的一对圆括号（```()```）。圆括号中可能包含传递给这个函数的参数。

属性存取表达式（```.```、```['']```）用于指定一个对象或数组的属性或元素。


### 字面量

对象字面量是一种可以方便地按指定规格创建新对象的表示法。属性名可以是标示符或字符串。属性的值就是表达式。

数组字面量是一种可以方便地按指定规格创建新数组的表示法。

### 函数

函数字面量定义了函数值。它可以有一个可选的名字，用于递归地调用自己。它可以指定一个参数列表，这些参数就像变量一样，在调用时由传递的实际参数（argument）初始化。函数的主体包括变量定义的语句。


## 对象

JavaScript的简单数据类型包括：数值、字符串、布尔值、null和undefined。其他所有的值都是对象。JavaScript中的对象是可变的“键／值”对的集合。数字、字符串和布尔值“貌似”对象，因为它们拥有方法，但它们是不可变的。

对象是属性的容器，其中每个属性都拥有名字和值。属性的名字可以是包括空字符串在哪的任意字符串。属性值可以是除undefined之外的任何值。

JavaScript包含一种原型链的特性，允许对象继承另一个对象的属性。


### 对象字面量

一个对象字面量就是包围在一对花括号中的零或多个“名／值”对。属性名可以是包括空字符串在内的任何字符串。属性的值可以从包括另一个对象字面量在内的任意表达式中获得。逗号用来分隔多个“名／值”对。


### 检索

```.```表示法 和 ```[]```

```||``` 运算符可以用来填充默认值。


### 更新

对象里的值可以通过赋值语句来更新。如果属性名已经存在于对象里，那么这个属性的值就会被替换。如果对象之前没有这个属性名，那么该属性就被扩充到对象中。

### 引用

对象通过引用来传递。他们永远不会被复制。


### 原型

每个对象都连接到一个原型对象，并且它可以从中继承属性。所有通过对象字面量创建的对象都连接到```Object.prototype```，它是JavaScript中的标配对象。

当创建一个新对象时，可以选择某个对象作为它的原型。

原型连接在更新时是不起作用的。当我们对某个对象做出改变时，不会触及该对象的原型。

原型连接只有在检索值的时候才被用到。如果我们尝试去获取对象的某个属性值，但该对象没有此属性名，那么JavaScript会试着从原型对象中获取属性值。如果那个原型对象也没有该属性，那么再从它的原型中寻找，依此类推，直到该过程最后到达终点```Object.prototype```。如果想要的属性完全不存在于原型链中，那么结果就是undefined值。这个过程称为**委托**。

原型关系是一种动态的关系，如果我们添加一个新的属性到原型中，该属性会立即对所有基于该原型创建的对象可见。


### 反射

使用```hasOwnProperty```方法，如果对象拥有独有的属性，它将返回true。hasOwnProperty方法不会检查原型链。

### 枚举

```for in```语句可用来遍历一个对象中的所有属性名。该枚举过程将会列出所有属性——包括函数和原型中的属性——所以有必要过滤掉那些你不想要的值。最为常用的过滤器是```hasOwnProperty```方法，以及使用```typeof```来排除函数。

### 删除

```delete```运算符可以用来删除对象的属性。如果对象包含该属性，该属性就会被移除。它不会触及原型链中的任何对象。

删除对象的属性可能会让来自原型链中的属性透现出来。


### 减少全局变量污染

最小化使用全局变量的方法之一是为你的应用只创建一个唯一的全局变量。
